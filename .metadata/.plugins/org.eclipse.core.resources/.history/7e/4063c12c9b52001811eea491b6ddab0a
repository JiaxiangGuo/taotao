package com.taotao.controller;

import java.util.Map;

import org.apache.commons.fileupload.FileUpload;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.multipart.MultipartFile;

import com.taotao.utils.FastDFSClient;

/*
 * 图片上传Controller
 */
@Controller
public class PictureController {

	@RequestMapping("/pic/upload")
	@ResponseBody
	public Map picUpload(MultipartFile uploadFile) throws Exception{
		
		//接收上传文件
		//取扩展名
		String fileName = uploadFile.getOriginalFilename();
		String extName = fileName.substring(fileName.lastIndexOf(".")+1);
		//上传到图片服务器
		FastDFSClient fastDFSClient = new FastDFSClient("classpath:resource/client.conf");
		String url = fastDFSClient.uploadFile(uploadFile.getBytes(), extName);
		//相应上传图片的URL
		
		
		return null;
	}
}
